<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.art1001.supply.mapper.content.ArticleMapper">



    <select id="selectByExample" resultType="com.art1001.supply.entity.content.Article">
        select pa.*,
        tu.image as memberImage,
        tu.user_name as userName
        from prm_article pa
        left join tb_user tu
        on pa.member_id=tu.user_id
        <where>
        and pa.is_del=0
            <if test="acId != null and acId != ''">
                and pa.ac_id=#{acId}
            </if>
            <if test="state ==0">
                and pa.state=3
            </if>
            <if test="state == 1">
                and pa.state=2
            </if>
        </where>
        order by pa.create_time desc
    </select>
    <select id="selectArticlePage" resultType="com.art1001.supply.entity.content.Article">
        select pa.*,
        tu.image as memberImage,
        tu.user_name as userName
        from prm_article pa
        left join tb_user tu
        on pa.member_id = tu.user_id
        ${ew.customSqlSegment}
    </select>
    <select id="selectCommentCount" resultType="java.lang.Integer">
        select IFNULL(comment_count,0) comment_count from prm_article where article_id=#{articleId}
    </select>
</mapper>