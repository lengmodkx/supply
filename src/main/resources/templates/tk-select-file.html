<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}" href="../static/css/common.css">
    <link rel="stylesheet" type="text/css" th:href="@{/layui/css/layui.css}" href="../static/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/select-file.css}" href="../static/css/select-file.css">
</head>
<body>
<!--复制文件 弹框-->
<div class="clone-project">
    <div class="clone-project-title boxsizing">
        <h4>从文件库选择</h4>
    </div>

    <div class="clone-project-content">

            <div class="clone-project-left">
                <p class="style-wjj boxsizing">文件夹</p>
                <div class="zong-wjj boxsizing">
                    <img src="../static/image/wjj-b.png" th:src="@{/image/wjj-b.png}">
                    <span>文件库</span>
                </div>
            </div>
           <div class=" clone-project-right-box">
                <ul class="scroll-ul">
                    <!--每一列-->
                    <li class="column boxsizing">
                        <div class="li-header boxsizing">
                            <i class="layui-icon layui-icon-upload-drag" style="font-size: 18px; color: #a6a6a6;"></i>
                            <i class="layui-icon layui-icon-add-circle create-wjj" style="font-size: 18px; color: #a6a6a6;"></i>
                        </div>
                        <p class="style-wjj boxsizing">文件夹</p>
                        <div class="new-wjj boxsizing"><input  type="text" placeholder="按 Enter 新建文件夹"></div>
                        <ul class="wjj-ul">
                            <li class="style-li boxsizing over-hidden now">
                                <img src="../static/image/wjj-b.png" th:src="@{/image/wjj-b.png}">
                                <span>文件夹</span>
                            </li>
                        </ul>
                        <p class="style-wjj boxsizing">文件</p>
                        <ul class="wj-ul">
                            <li class="style-li boxsizing over-hidden ">
                                <img src="../static/image/wjj-b.png" th:src="@{/image/wjj-b.png}">
                                <span>adkasd.zip</span>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>



    </div>

    <div class="clone-project-foot boxsizing">
        <div class="clone-no">取消</div>
        <div class="clone-ok">确定</div>
    </div>


</div>
<!--<div class="new-wjj boxsizing"><input  type="text" placeholder="按 Enter 新建文件夹"></div>-->
</body>
<script th:src="@{/js/jquery-2.2.4.min.js}" src="../static/js/jquery-2.2.4.min.js"></script>
<script th:src="@{/layui/layui.js}" src="../static/layui/layui.js"></script>
<script>
    layui.use('form', function(){
        var form = layui.form;
        //监听提交
        form.on('submit(formDemo)', function(data){
            layer.msg(JSON.stringify(data.field));
            return false;
        });
    });
//点击 添加文件夹
    $("html").on("click",".create-wjj",function (e) {
        $(this).parent().siblings(".new-wjj").show();
        e.stopPropagation()
    });
    //点击空白区域 新建 文件夹 输入框 消失
    $("html").on("click",".new-wjj input",function (e) {
       e.stopPropagation()
    });
    $("html").on("keydown",".new-wjj input",function (e) {
        if(event.keyCode ==13){
            $(this).parent().siblings(".wjj-ul").prepend(' <li class="style-li boxsizing over-hidden ">\n' +
                '                                <img src="../static/image/wjj-b.png" th:src="@{/image/wjj-b.png}">\n' +
                '                                <span>'+ $(this).val() +'</span>\n' +
                '                            </li>');
            $(this).parent().hide()
        }

    });
    $(document).click(function(event){
        var _con = $('.new-wjj input');  // 设置目标区域
        if(!_con.is(event.target) && _con.has(event.target).length === 0){ // Mark 1
            $('.new-wjj').hide(100);     //淡出消失
        }
    });
    // 点击 增加now 类名
    $("html").on("click",".wjj-ul>li",function () {
        $(this).addClass("now").siblings().removeClass("now");
        $(this).parents(".column").nextAll().remove();
        $(this).parents(".column").after('<li class="column boxsizing">\n' +
            '                        <div class="li-header boxsizing">\n' +
            '                            <i class="layui-icon layui-icon-upload-drag" style="font-size: 18px; color: #a6a6a6;"></i>\n' +
            '                            <i class="layui-icon layui-icon-add-circle create-wjj" style="font-size: 18px; color: #a6a6a6;"></i>\n' +
            '                        </div>\n' +
            '                        <p class="style-wjj boxsizing">文件夹</p>\n' +
            '                        <div class="new-wjj boxsizing"><input  type="text" placeholder="按 Enter 新建文件夹"></div>\n' +
            '                        <ul class="wjj-ul">\n' +
            '                            <li class="style-li boxsizing over-hidden now">\n' +
            '                                <img src="../static/image/wjj-b.png" th:src="@{/image/wjj-b.png}">\n' +
            '                                <span>文件夹</span>\n' +
            '                            </li>\n' +
            '                        </ul>\n' +
            '                        <p class="style-wjj boxsizing">文件</p>\n' +
            '                        <ul class="wj-ul">\n' +
            '                            <li class="style-li boxsizing over-hidden ">\n' +
            '                                <img src="../static/image/wjj-b.png" th:src="@{/image/wjj-b.png}">\n' +
            '                                <span>adkasd.zip</span>\n' +
            '                            </li>\n' +
            '                        </ul>\n' +
            '                    </li>')
    });
    $("html").on("click",".wj-ul>li",function () {
       if ($(this).hasClass("now")){
           $(this).removeClass("now")
       } else {
           $(this).addClass("now")
       }
    });


// 关闭弹出层
    $(".clone-project-foot div").click(function () {
        var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
        parent.layer.close(index); //再执行关闭
    });

</script>
</html>