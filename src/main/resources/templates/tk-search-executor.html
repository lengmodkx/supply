<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}" href="../static/css/common.css">
    <link rel="stylesheet" type="text/css" th:href="@{/layui/css/layui.css}" href="../static/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/search-people.css}" href="../static/css/search-people.css">
</head>
<body>
<!--人员 参与者 弹框-->
<div class="people boxsizing">
    <input type="text" name="" placeholder="搜索" class="layui-input">
    <div class="peoples">
        <div>
            <p>执行者</p>
            <div class="one-people" th:if="${user!=null}" th:id="${user.id}">
                <img th:src="#{IMAGE_SERVER}+${user.userInfo.image}" />
                <span th:text="${user.userName}"></span>
                <i class="layui-icon layui-icon-ok" style="font-size: 16px; color: #D1D1D1;display: block;"></i>
            </div>

            <div class="one-people" th:if="${user==null}">
                <img src="/image/person.png"/>
                <span>待认领</span>
                <i class="layui-icon layui-icon-ok" style="font-size: 16px; color: #D1D1D1;display: block;"></i>
            </div>
        </div>
        <p>推荐</p>
        <div class="one-people" th:each="member:${members}" th:id="${member.memberId}">
            <img src="../static/image/begintime.png" th:src="#{IMAGE_SERVER}+${member.memberImg}" />
            <span th:text="${member.memberName}"></span>
            <i class="layui-icon layui-icon-ok" style="font-size: 16px; color: #D1D1D1;"></i>
        </div>
    </div>
</div>
</body>
<script th:src="@{/js/jquery-2.2.4.min.js}" src="../static/js/jquery-2.2.4.min.js"></script>
<script th:src="@{/layui/layui.js}" src="../static/layui/layui.js"></script>
<script th:inline="javascript">
    $(".one-people").click(function () {
        var executor=$(this).attr('id');
        var uName=$(this).find('span').text();
        var taskId = [[${taskId}]];
        if(executor===null||executor===undefined){
            var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
            parent.layer.close(index); //再执行关闭
        }else{
            $.post('/task/updateTaskExecutor',{"taskId":taskId,"executor":executor,"uName":uName},function (data) {
                if(data.result===1){
                    var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
                    parent.layer.close(index); //再执行关闭
                }
            });
        }
  });

</script>
</html>