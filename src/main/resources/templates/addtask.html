<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head >
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}" href="../static/css/common.css">
    <link rel="stylesheet" type="text/css" th:href="@{/layui/css/layui.css}" href="../static/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/mainpage.css}" href="../static/css/mainpage.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/addtask.css}" href="../static/css/addtask.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/revisetask.css}" href="../static/css/revisetask.css">
</head>

<body>
<!--添加任务界面-->
<form id="new-assignment" class="new-assignment boxsizing layui-form" >
    <textarea th:name="taskName" required lay-verify="required" placeholder="任务内容" class="layui-textarea rw-content boxsizing"></textarea>
    <div class="who-and-time">
        <div class="who-wrap">
            <input th:name="userId" th:value="${user.id}" type="hidden"/>
            <img th:src="#{IMAGE_SERVER} + ${user.userInfo.image}" />
            <span th:text="${user.userName}">谁谁谁</span>
            <i class="layui-icon layui-icon-close-fill remove-who-wrap" style="font-size: 16px; color: #1E9FFF;"></i>
        </div>
        <div class="no-renling">
            <i class="layui-icon layui-icon-username no-people-img" style="font-size: 20px; color: #A6A6A6;"></i>
            <span>待认领</span>
        </div>
    </div>
    <div class="begin-time abox">
        <img th:src="@{/image/begintime.png}" />
        <input type="text" class="layui-input" id="beginTime" th:name="startTime" placeholder="设置开始时间">
    </div>
    <div class="over-time abox">
        <img th:src="@{/image/begintime.png}" />
        <input type="text" class="layui-input" id="overTime" th:name="endTime" placeholder="设置截止时间">
    </div>
    <div class="no-repeat abox">
        <img th:src="@{/image/norepeat.png}" >
        <select name="repeat" lay-verify="">
            <option value="不重复">不重复</option>
            <option value="每天重复">每天重复</option>
            <option value="每周重复">每周重复</option>
            <option value="每月重复">每月重复</option>
            <option value="每年重复">每年重复</option>
            <option value="工作日重复">工作日重复</option>
        </select>
    </div>
    <div class="no-remand abox">
        <img th:src="@{/image/noremand.png}" >
        <select name="remand" lay-verify="">
            <option value="不提醒">不提醒</option>
            <option value="任务截止时提醒">任务截止时提醒</option>
            <option value="任务开始时提醒">任务开始时提醒</option>
        </select>
    </div>
    <div class="pri layui-form">
        <div class="layui-input-block">
            <input type="radio" name="state" value="普通" title="普通" checked>
            <input type="radio" name="state" value="紧急" title="紧急">
            <input type="radio" name="state" value="非常紧急" title="非常紧急" >
        </div>
    </div>
    <div class="add-tag combox">
        <img th:src="@{/image/biaoqian.png}" >
        <span>标签</span>
        <span class="no-tags">添加标签</span>
        <!--新建  搜索标签框-->
        <div class="tags-search-build" style="display: none">
            <!--搜索标签-->
            <div class="tag-search" style="display: none">
                <div class="tag-search-title boxsizing">
                    <input class="tag-search-input" type="text" placeholder="搜索标签">
                    <img th:src="@{/image/adds.png}" >
                </div>
                <ul class="tags-ul boxsizing">
                    <li class="tags-list">
                        <span class="dot"></span>
                        <span class="tag-font">标签标签</span>
                    </li>
                    <li class="tags-list">
                        <span class="dot"></span>
                        <span class="tag-font">标签标签</span>
                    </li>
                    <li class="tags-list">
                        <span class="dot"></span>
                        <span class="tag-font">标签标签</span>
                    </li>

                </ul>
            </div>
            <!--新建标签-->
            <div class="build-tags" style="display: none">
                <div class="build-tags-title boxsizing">
                    <i class="layui-icon layui-icon-left go-return" style="font-size: 15px; color: #a6a6a6;"></i>
                    新建标签
                    <i class="layui-icon layui-icon-close close-tag" style="font-size: 15px; color: #a6a6a6;"></i>
                </div>
                <div class="build-tags-con boxsizing">
                    <input class="tag-name boxsizing" type="text" placeholder="标签名称">
                    <ul class="color-pick">
                        <li>
                            <i class="layui-icon layui-icon-ok" style="font-size: 14px; color: #fff;"></i>
                        </li>
                        <li>
                            <i class="layui-icon layui-icon-ok" style="font-size: 14px; color: #fff;"></i>
                        </li>
                        <li>
                            <i class="layui-icon layui-icon-ok" style="font-size: 14px; color: #fff;"></i>
                        </li>
                        <li>
                            <i class="layui-icon layui-icon-ok" style="font-size: 14px; color: #fff;"></i>
                        </li>
                        <li>
                            <i class="layui-icon layui-icon-ok" style="font-size: 14px; color: #fff;"></i>
                        </li>
                        <li>
                            <i class="layui-icon layui-icon-ok" style="font-size: 14px; color: #fff;"></i>
                        </li>
                    </ul>
                    <button class="tag-ok" disabled>创建</button>
                </div>

            </div>
        </div>
        <div class="has-tags" style="display:none;">
            <i class="layui-icon layui-icon-add-circle" style="font-size: 16px; color: #a6a6a6;"></i>
        </div>

    </div>
    <div class="heng-line"></div>
    <p class="cyz">参与者</p>
    <div class="work-people boxsizing clearfix">
        <div class="one-work-people">
            <img th:src="@{/image/add.png}" >
            <i class="layui-icon layui-icon-close-fill remove-work-people " style="font-size: 15px; color: #3da8f5;"></i>
        </div>
        <div class="add-work-people">
            <img th:src="@{/image/adds.png}" >
        </div>
    </div>
    <div class="heng-line"></div>
    <div class="secret abox layui-form">
        <img th:src="@{/image/suo.png}" >
        <span>隐私模式</span>
        <div class="switch">
            <input type="checkbox" name="" lay-skin="switch" lay-filter="switch-filter">
        </div>
        <div class="who-can-see">所有成员可见</div>
    </div>
    <div class="layui-btn layui-btn-normal new-assignment-ok" >创建</div>


    <!--人员 参与者 弹框-->
    <div class="people boxsizing" style="display: none">
        <input type="text" name="" placeholder="搜索" class="layui-input">
        <div class="peoples">
            <p>参与者</p>
            <div class="one-people">
                <img th:src="@{/image/begintime.png}">
                <span>李健</span>
                <i class="layui-icon layui-icon-ok" style="font-size: 16px; color: #D1D1D1;"></i>
            </div>
            <p>推荐</p>
            <div class="one-people">
                <img th:src="@{/image/begintime.png}">
                <span>李健</span>
                <i class="layui-icon layui-icon-ok" style="font-size: 16px; color: #D1D1D1;"></i>
            </div>
            <div class="add-new-people">
                <img th:src="@{/image/adds.png}">
                <span>邀请新成员</span>
            </div>
        </div>
        <div class="people-ok">确定</div>


    </div>
</form>

</body>
<script th:src="@{/js/jquery-2.2.4.min.js}" src="../static/js/jquery-2.2.4.min.js"></script>
<script th:src="@{/layui/layui.js}" src="../static/layui/layui.js"></script>
<script th:src="@{/js/Sortable.min.js}" src="../static/js/Sortable.min.js"></script>
<script th:src="@{/js/mainpage.js}" src="../static/js/mainpage.js"></script>
</html>
<script>
    $(function () {
        //点击 认领人 的x 号， 移出认领人 ，待认领出现
        $(".remove-who-wrap").click(function () {
            $(this).parent().remove();
            if ($(".who-and-time").find(".who-wrap").length==0){
                $(".no-renling").show();
            }else {
                $(".no-renling").hide();
            }
        });
        //点击 待认领 出现 人员名单
        $(".no-renling").click(function (e) {
            $(".people").show(500)
            e.stopPropagation()
        });
        // 点击添加标签
        $(".no-tags").click(function (e) {
            $(".tags-search-build").show();
            $(".tag-search").show();
            $(".no-tags").hide();
            e.stopPropagation();
        });
        $(".tag-search-title img").click(function () {
            $(".tag-search").hide();
            $(".build-tags").show();
        });
        $(".go-return").click(function () {
            $(".tag-search").show();
            $(".build-tags").hide();
        });
        $(".close-tag").click(function () {
            $(".tags-search-build").slideUp();
            $(".no-tags").show();
        });
        $(".has-tags>i").click(function (e) {
            $(".tags-search-build").show();
            $(".tag-search").show();

            e.stopPropagation();
        });

        // 点击某个具体标签
        $(".tags-list").click(function () {
            var tag=$(this).find(".tag-font").text();
            $(".has-tags").show()
            $(".has-tags").prepend('<span class="tag">\n' +
                '                    '+tag+'  \n' +
                '                    <i class="layui-icon layui-icon-close-fill" style="font-size: 14px; color: #1E9FFF;"></i>\n' +
                '                </span>')
        });
        $(".revise-task").on("click",".tag i",function(){
            $(this).parent().remove();
            //判断 有没有标签
            console.log($(".has-tags span").length);
            if ($(".has-tags span").length==0){
                $(".has-tags").hide();
                $(".no-tags").show();
            } else {
                $(".has-tags").show();
                $(".no-tags").hide();
            }
        });
        //点击空白区域 添加标签消失
        $(document).click(function(event){
            var _con = $('.tags-search-build');   // 设置目标区域
            if(!_con.is(event.target) && _con.has(event.target).length === 0){ // Mark 1
                //$('#divTop').slideUp('slow');   //滑动消失
                $('.tags-search-build').hide(500);          //淡出消失
            }
        });
        //点击添加人员按钮
        $(".add-work-people img").click(function (e) {
            $(".people").show(500);
            e.stopPropagation()
        });

        //点击人员 出现对勾
        $(".one-people").click(function () {
            $(this).find("i").toggle();

        });
        //点击空白区域 添加人员消失
        $(document).click(function(event){
            var _con = $('.people ');   // 设置目标区域
            if(!_con.is(event.target) && _con.has(event.target).length === 0){ // Mark 1
                //$('#divTop').slideUp('slow');   //滑动消失
                $('.people ').hide(500);          //淡出消失
            }
        });
    })
</script>