<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}" href="../static/css/common.css">
    <link rel="stylesheet" type="text/css" th:href="@{/layui/css/layui.css}" href="../static/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/search-people.css}" href="../static/css/search-people.css">
</head>
<body>
<!--人员 参与者 弹框-->
<div class="people boxsizing" style="display: none;top: 20px;left: 10px">
    <input type="text" name="" placeholder="搜索" class="layui-input">
    <div class="peoples">
        <p>参与者</p>
        <div id = "joinInfo">

        </div>
        <p>推荐</p>
        <div id = "Recommend">

        </div>
        <div class="add-new-people">
            <img src="../static/image/adds.png" th:src="@{/image/adds.png}"/>
            <span>邀请新成员</span>
        </div>
    </div>
    <div class="people-ok">确定</div>


</div>
<!--人员 参与者 弹框-->
<div class="people boxsizing">
    <input type="text" name="" placeholder="搜索" class="layui-input">
    <input type="hidden" th:value="${shareId}" id="shareId">
    <div class="peoples">
        <div>
            <p>项目成员</p>
            <div class="one-people" th:each="member:${projectMemberList}" th:data="${member.memberId}">
                <img src="../static/image/begintime.png" th:src="#{IMAGE_SERVER}+${member.memberImg}"/>
                <span th:text="${member.memberName}"></span>
                <i class="layui-icon layui-icon-ok" style="font-size: 16px; color: #D1D1D1;"></i>
            </div>
        </div>
        <!--<p>推荐</p>-->
        <!--<div id = "noExecutor">-->

        <!--</div>-->
        <!--<div class="add-new-people">-->
        <!--<img src="../static/image/adds.png" th:src="@{/image/adds.png}" />-->
        <!--<span>邀请新成员</span>-->
        <!--</div>-->
    </div>
    <div class="people-ok">确定</div>
</div>
</body>
<script th:src="@{/js/jquery-2.2.4.min.js}" src="../static/js/jquery-2.2.4.min.js"></script>
<script th:src="@{/layui/layui.js}" src="../static/layui/layui.js"></script>
<script th:inline="javascript">
    var shareId = $("#shareId").val();
    var members = [[${members}]];
    $(".people-ok").click(function (e) {
        var id = [];
        var names = [];
        var img = [];
        for (var i = 0; i < $(".one-people").length; i++) {
            if ($(".one-people").eq(i).find("i").is(":visible")) {
                var value = $(".one-people").eq(i).attr("id");
                var image = $(".one-people").eq(i).find("img").attr("src");
                var name = $(".one-people").eq(i).find("span").html();
                id.push(value);
                img.push(image);
                names.push(name);
            }
        }
        //跟新参与者的头像
        parent.addMember(id, names, img);
        parent.layer.closeAll();
    });

    $(".one-people").each(function () {
        $(this).click(function () {
            $(this).find('i').toggle();
            var memberId = $(this).attr("data");
            $.post("", {shareId: shareId, memberId: memberId}, function (data) {
                if (data.result === 1) {

                }
            });
        });
    });

</script>
</html>